<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Discord User List</title>

<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg1:#140008;
  --bg2:#000;
  --accent:#ff4d6d;
  --accent2:#ff85a1;
  --text:#f3f3f3;
  --muted:#a9a9a9;
}
body{
  margin:0;
  font-family:'Kanit',sans-serif;
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  color:var(--text);
  overflow:hidden;
}

/* Header */
header{
  position:fixed;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  width:calc(100% - 40px);
  max-width:1100px;
  display:flex;
  align-items:center;
  gap:14px;
  padding:14px 22px;
  border-radius:20px;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.08);
  backdrop-filter:blur(14px);
  box-shadow:0 8px 25px rgba(0,0,0,0.55);
  z-index:10;
}
header img.logo{
  width:52px;height:52px;
  border-radius:14px;
  object-fit:cover;
}
header h1{
  font-weight:600;
  font-size:20px;
  margin:0;
}

.join {
  position: relative;
  overflow: hidden;
  margin-left: auto;
  padding: 12px 30px;
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 14px;
  background: rgba(255,255,255,0.1);
  color: #fff;
  font-weight: 600;
  font-size: 16px;
  cursor: pointer;
  font-family: 'Kanit', sans-serif;
  transition: transform 0.25s, box-shadow 0.25s, background 0.4s;
  backdrop-filter: blur(12px);
  box-shadow: 0 4px 14px rgba(255,255,255,0.08);
}

.join:hover {
  transform: translateY(-3px) scale(1.03);
  box-shadow: 0 8px 25px rgba(255,255,255,0.15);
}

.join:active {
  transform: scale(0.96);
}

/* เอฟเฟกต์วงกลมขยาย */
.join::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(circle at center, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0) 70%);
  transform: scale(0);
  opacity: 0;
  transition: transform 0.8s ease, opacity 0.8s ease;
}

.join:hover::before {
  transform: scale(4);
  opacity: 1;
}

@keyframes ripple{
  to{
    transform:scale(4);
    opacity:0;
  }
}

/* User list */
main{
  margin-top:120px;
  display:flex;
  justify-content:center;
}
.list{
  width:90%;
  max-width:1000px;
  border-radius:16px;
  padding:22px;
  background:rgba(255,255,255,0.03);
  backdrop-filter:blur(10px);
  border:1px solid rgba(255,255,255,0.06);
  box-shadow:0 8px 30px rgba(0,0,0,0.6);
  overflow:auto;
  max-height:80vh;
}
.list h2{
  font-size:20px;
  margin-top:0;
  font-weight:600;
  color:var(--accent);
}
.user{
  display:flex;
  align-items:center;
  gap:14px;
  background:rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:14px;
  padding:10px;
  margin-bottom:10px;
  transition:transform .2s,box-shadow .2s;
}
.user:hover{
  transform:translateY(-4px);
  box-shadow:0 10px 25px rgba(0,0,0,0.4);
}
.user img{
  width:48px;height:48px;
  border-radius:10px;
  object-fit:cover;
}
.info{
  flex:1;
}
.info .name{
  font-weight:600;
  font-size:15px;
}
.info .status{
  font-size:13px;
  color:var(--muted);
}

/* หิมะเบา ๆ */
#snow{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:1;
}
::-webkit-scrollbar{
  width:8px;
}
::-webkit-scrollbar-thumb{
  background:rgba(255,255,255,0.08);
  border-radius:8px;
}
::-webkit-scrollbar-track{
  background:transparent;
}
</style>
</head>
<body>
<canvas id="snow"></canvas>

<header>
  <img src="https://media.discordapp.net/attachments/1420002082538131476/1423269280618909786/OVERNIGHTCOMM.png?ex=68f76d4f&is=68f61bcf&hm=ee8562daea4c5d582cf822376cc7405b06b4f395f6ebd73bc71b2c4e0b6a511f&=&format=webp&quality=lossless&width=832&height=832" class="logo" alt="logo">
  <h1>Discord User List</h1>
  <button class="join" id="joinBtn">เข้าร่วม Discord</button>
</header>

<main>
  <div class="list" id="user-list">
    <p>กำลังโหลดข้อมูลสมาชิก...</p>
  </div>
</main>

<script>
const SERVER_ID = "1369605319944310865";

async function loadDiscordUsers(){
  try{
    const res = await fetch(`https://discord.com/api/guilds/${SERVER_ID}/widget.json`);
    const data = await res.json();
    const list = document.getElementById('user-list');
    list.innerHTML = `<h2>สมาชิกออนไลน์ (${data.members.length})</h2>`;
    data.members.forEach(m=>{
      const div=document.createElement('div');
      div.className='user';
      div.innerHTML=`
        <img src="${m.avatar_url}" alt="${m.username}">
        <div class="info">
          <div class="name">${m.username}</div>
          <div class="status">${m.status}</div>
        </div>
      `;
      list.appendChild(div);
    });
  }catch(err){
    document.getElementById('user-list').innerHTML=
      `<p style="color:#ff7b7b;"> โหลดข้อมูล Discord ไม่ได้<br>ตรวจสอบ SERVER_ID และเปิด Widget ใน Discord แล้ว</p>`;
  }
}
loadDiscordUsers();
setInterval(loadDiscordUsers,15000);

/* Ripple effect */
const joinBtn=document.getElementById('joinBtn');
joinBtn.addEventListener('click',function(e){
  const rect=this.getBoundingClientRect();
  const x=e.clientX-rect.left;
  const y=e.clientY-rect.top;
  const ripple=document.createElement('span');
  ripple.classList.add('ripple');
  ripple.style.left=`${x}px`;
  ripple.style.top=`${y}px`;
  this.appendChild(ripple);
  setTimeout(()=>ripple.remove(),800);
  window.open('https://discord.gg/382sYP6Z4z','_blank');
});

/* Snow effect (soft) */
const canvas=document.getElementById("snow");
const ctx=canvas.getContext("2d");
let w,h;
function resize(){w=canvas.width=innerWidth;h=canvas.height=innerHeight;}
window.addEventListener("resize",resize);resize();

let flakes=[];
for(let i=0;i<60;i++){
  flakes.push({x:Math.random()*w,y:Math.random()*h,r:Math.random()*2+0.8,d:Math.random()*0.4+0.2,o:Math.random()*0.7+0.3});
}
function drawSnow(){
  ctx.clearRect(0,0,w,h);
  for(let f of flakes){
    ctx.globalAlpha=f.o;
    ctx.beginPath();
    ctx.arc(f.x,f.y,f.r,0,Math.PI*2);
    ctx.fillStyle="#fff";
    ctx.fill();
  }
  updateSnow();
  requestAnimationFrame(drawSnow);
}
function updateSnow(){
  for(let f of flakes){
    f.y+=f.d+0.3;
    f.x+=Math.sin(f.y*0.01)*0.2;
    if(f.y>h){f.y=0;f.x=Math.random()*w;}
  }
}
drawSnow();
</script>
</body>
</html>
